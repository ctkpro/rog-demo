function oMousePos(canvas,evt){var ClientRect=canvas.getBoundingClientRect();return{x:Math.round(evt.clientX-ClientRect.left),y:Math.round(evt.clientY-ClientRect.top)}}var canvas=new fabric.Canvas("canvas",{height:.9*window.innerHeight,width:.9*window.innerWidth,backgroundColor:"rgb(0,0,0)",selectionColor:"blue",selectionLineWidth:2});fabric.Object.prototype.selectable=!1;let rect=new fabric.Rect({left:10,top:10,fill:"red",width:20,height:20});function drawGrid(){canvas.clear();const longer=window.innerWidth>window.innerHeight?window.innerWidth:window.innerHeight;let vLine,hLine;d=40;const lineDef={fill:"#aaa",stroke:"rgba(250, 250, 250, 0.2)",strokeWidth:1,selectable:!1};for(let i=-1e3/d;i*d<=2e3;i++)vLine=new fabric.Line([i*d,-1e3,i*d,2e3],lineDef),hLine=new fabric.Line([-1e3,i*d,2e3,i*d],lineDef),i%5==0&&(vLine.stroke="rgba(250,250,250, 0.7)",hLine.stroke="rgba(250,250,250, 0.7)"),canvas.add(vLine,hLine)}drawGrid(),canvas.add(rect);let particles=[];function setZoom(zoom,x,y){let newZoom=canvas.getZoom()+zoom;newZoom>2?newZoom=2:newZoom<.8&&(newZoom=.8),canvas.zoomToPoint({x:x,y:y},newZoom)}fabric.loadSVGFromURL("js/map_world.svg",(function(objects,options){for(let i=1;i<objects.length;i++){let polygon=new fabric.Polygon([objects[i].points[0],objects[i].points[1],objects[i].points[2]],{left:objects[i].left/2.5,top:objects[i].top/2.5,fill:objects[i].fill,scaleX:.4,scaleY:.4,holder:objects[i].fill});canvas.add(polygon)}})),fabric.loadSVGFromURL("js/map_seven_sign.svg",(function(objects,options){for(let i=1;i<objects.length;i++){let polygon=new fabric.Polygon([objects[i].points[0],objects[i].points[1],objects[i].points[2]],{left:objects[i].left/2.5,top:objects[i].top/2.5,fill:objects[i].fill,scaleX:.4,scaleY:.4,holder:objects[i].fill});canvas.add(polygon)}})),canvas.on("mouse:wheel",e=>{if(e.e.ctrlKey){const deltaY=e.e.deltaY,newZoom=deltaY/10*-1;setZoom(newZoom,e.e.offsetX,e.e.offsetY)}});let btnScaleUp=document.querySelector(".scale-up"),btnScalepDown=document.querySelector(".scale-down");btnScaleUp.addEventListener("click",(function(e){setZoom(.2,canvas.width/2,canvas.height/2)})),btnScalepDown.addEventListener("click",(function(e){setZoom(-.2,canvas.width/2,canvas.height/2)}));const dragInfo={isDragging:!1,lastX:0,lastY:0};canvas.on("mouse:down",e=>{dragInfo.isDragging=!0,canvas.selection=!1,dragInfo.lastX=e.e.clientX,dragInfo.lastY=e.e.clientY});const moveLimit=280;canvas.on("mouse:move",e=>{if(dragInfo.isDragging){let canvasScale=canvas.viewportTransform[0],moveFit=canvasScale*canvasScale*-200;canvas.viewportTransform[4]>280?canvas.viewportTransform[4]=280:canvas.viewportTransform[4]<-280*canvasScale**2?canvas.viewportTransform[4]=-280*canvasScale**2:canvas.viewportTransform[4]+=e.e.clientX-dragInfo.lastX,canvas.viewportTransform[5]>280?canvas.viewportTransform[5]=280:canvas.viewportTransform[5]<-280*canvasScale**2?canvas.viewportTransform[5]=-280*canvasScale**2:canvas.viewportTransform[5]+=e.e.clientY-dragInfo.lastY,canvas.requestRenderAll(),dragInfo.lastX=e.e.clientX,dragInfo.lastY=e.e.clientY}}),canvas.on("mouse:up",(function(opt){dragInfo.isDragging=!1,dragInfo.selection=!0})),canvas.on("mouse:over",(function(e){e.target.set("fill","green"),canvas.renderAll()})),canvas.on("mouse:out",(function(e){e.target.set("fill",e.target.holder),canvas.renderAll()}));
//# sourceMappingURL=map.min.js.map